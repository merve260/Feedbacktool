<!-- src/app/features/survey/survey-publish/survey-publish.component.html -->

<div class="publish-actions">
  <!-- ===== Aktionen (Entwurf / Veröffentlichen) ===== -->
  <div class="builder-actions" *ngIf="showActions">
    <button
      mat-stroked-button
      color="primary"
      (click)="onDraft()"
      [disabled]="!isReady() || busy">
      Entwurf speichern
    </button>

    <button
      mat-raised-button
      color="primary"
      [disabled]="!isReady() || busy"
      (click)="publishSurvey()">
      {{ publishing ? 'Veröffentlichen...' : 'Umfrage veröffentlichen' }}
    </button>
  </div>

  <!-- ===== Hinweise & Fehlermeldungen ===== -->
  <div class="builder-actions" *ngIf="showActions">
    <div class="note" *ngIf="startInPast">Startdatum darf nicht in der Vergangenheit liegen.</div>
    <div class="note" *ngIf="endBeforeStart">Enddatum darf nicht vor dem Startdatum liegen.</div>
    <div class="note" *ngIf="canvasQuestions.length === 0">Mindestens eine Frage hinzufügen.</div>

    <div *ngIf="errorMsg" class="error-message">
      <mat-icon>error_outline</mat-icon>
      {{ errorMsg }}
    </div>
  </div>

  <!-- ===== Link nach erfolgreichem Publish ===== -->
  <div *ngIf="linkVisible" class="link-section" id="linkSection">
    <strong>Umfragelink:</strong>
    <a [href]="getSurveyLink()" target="_blank">{{ getSurveyLink() }}</a>
    <button
      mat-icon-button
      (click)="copyLinkToClipboard()"
      matTooltip="Link kopieren"
      matTooltipPosition="right">
      <mat-icon>content_copy</mat-icon>
    </button>
  </div>

  <div *ngIf="copied" class="toast">Link kopiert!</div>

  <!-- Direkt zur Umfrage wechseln -->
  <button
    *ngIf="linkVisible"
    mat-stroked-button
    color="accent"
    (click)="goToViewer()">
    Umfrage anzeigen
  </button>
</div>
