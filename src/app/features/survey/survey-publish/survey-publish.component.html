<!-- src/app/features/survey/survey-publish/survey-publish.component.html -->

<div class="publish-actions">

  <!-- Buttons zum Speichern als Entwurf oder zum Veröffentlichen -->
  <div class="builder-actions" *ngIf="showActions">
    <button
      mat-stroked-button
      color="primary"
      (click)="onDraft()"
      [disabled]="!isReady() || busy">
      Entwurf speichern
    </button>

    <button
      mat-raised-button
      color="primary"
      [disabled]="!isReady() || busy"
      (click)="publishSurvey()">
      {{ publishing ? 'Veröffentlichen...' : 'Umfrage veröffentlichen' }}
    </button>
  </div>

  <!-- Hinweise und Validierungsfehler (z. B. ungültiges Datum) -->
  <div class="builder-actions" *ngIf="showActions">
    <div class="note" *ngIf="startInPast">Startdatum darf nicht in der Vergangenheit liegen.</div>
    <div class="note" *ngIf="endBeforeStart">Enddatum darf nicht vor dem Startdatum liegen.</div>

    <!-- Allgemeine Fehlermeldung -->
    <div *ngIf="errorMsg" class="error-message">
      <mat-icon>error_outline</mat-icon>
      {{ errorMsg }}
    </div>
  </div>

  <!-- Bereich mit dem Teilnehmer-Link nach erfolgreichem Publish -->
  <div *ngIf="linkVisible" class="link-section" id="linkSection">
    <strong>Umfragelink:</strong>
    <a [href]="getSurveyLink()" target="_blank">{{ getSurveyLink() }}</a>
    <button
      mat-icon-button
      (click)="copyLinkToClipboard()"
      matTooltip="Link kopieren"
      matTooltipPosition="right">
      <mat-icon>content_copy</mat-icon>
    </button>
  </div>

  <!-- Kurze Rückmeldung, dass der Link kopiert wurde -->
  <div *ngIf="copied" class="toast">Link kopiert!</div>

  <!-- Button, um direkt zur Umfrage zu wechseln -->
  <button
    *ngIf="linkVisible"
    mat-stroked-button
    color="accent"
    (click)="goToViewer()">
    Umfrage anzeigen
  </button>
</div>
