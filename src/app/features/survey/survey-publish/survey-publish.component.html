<!-- src/app/features/survey/survey-publish/survey-publish.component.html -->

<div class="publish-actions">

  <!-- Buttons: Entwurf speichern + Umfrage verÃ¶ffentlichen -->
  <div class="builder-actions" *ngIf="showActions">
    <button
      mat-stroked-button
      color="primary"
      (click)="onDraft()"
      [disabled]="!isReady() || busy">
      {{ 'publish.draft' | translate }}
    </button>

    <button
      mat-raised-button
      color="primary"
      [disabled]="!isReady() || busy"
      (click)="publishSurvey()">
      {{ publishing ? ('publish.publishing' | translate) : ('publish.publish' | translate) }}
    </button>
  </div>

  <!-- Hinweise + Validierungsfehler -->
  <div class="builder-actions" *ngIf="showActions">
    <div class="note" *ngIf="startInPast">{{ 'publish.error.startInPast' | translate }}</div>
    <div class="note" *ngIf="endBeforeStart">{{ 'publish.error.endBeforeStart' | translate }}</div>

    <!-- Allgemeine Fehlermeldung -->
    <div *ngIf="errorMsg" class="error-message">
      <mat-icon>error_outline</mat-icon>
      {{ errorMsg }}
    </div>
  </div>

  <!-- Teilnehmer-Link nach erfolgreichem Publish -->
  <div *ngIf="linkVisible" class="link-section" id="linkSection">
    <strong>{{ 'publish.linkTitle' | translate }}</strong>
    <a [href]="getSurveyLink()" target="_blank">{{ getSurveyLink() }}</a>
    <button
      mat-icon-button
      (click)="copyLinkToClipboard()"
      [matTooltip]="'publish.copy' | translate"
      matTooltipPosition="right">
      <mat-icon>content_copy</mat-icon>
    </button>
  </div>

  <!-- Toast: Link kopiert -->
  <div *ngIf="copied" class="toast">{{ 'publish.copied' | translate }}</div>

  <!-- Direkt zur Umfrage wechseln -->
  <button
    *ngIf="linkVisible"
    mat-stroked-button
    color="accent"
    (click)="goToViewer()">
    {{ 'publish.showSurvey' | translate }}
  </button>
</div>
