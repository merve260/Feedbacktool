<!--
  Admin-Shell Layout (ohne Collapse)
  - Linke Sidenav mit Navigation
  - Obere Toolbar mit Seitentitel und User-Menü
  - Rechts der Inhaltsbereich (Router-Outlet)
-->
<mat-sidenav-container class="shell">
  <!-- Linke Sidebar -->
  <mat-sidenav mode="side" opened class="side" aria-label="Admin Navigation">
    <div class="side-shell">
      <!-- Kopfbereich / Marke -->
      <div class="side-header">
        <div class="brand">
          <mat-icon>insert_chart</mat-icon>
          <span class="brand-text">Umfrage-Tool</span>
        </div>
      </div>

      <!-- Hauptnavigation -->
      <nav class="nav">
        <a mat-list-item routerLink="/admin/umfragen" routerLinkActive="active">
          <mat-icon matListIcon>assignment</mat-icon>
          <span class="label">Meine Umfragen</span>
        </a>

        <a mat-list-item routerLink="/admin/ergebnisse" routerLinkActive="active">
        <span class="label">
          <mat-icon matListIcon>insights</mat-icon>
           Umfrage Ergebnisse &<br>Analytics
        </span>
        </a>

      </nav>

      <!-- Platzhalter schiebt das untere Menü nach ganz unten -->
      <div class="spacer"></div>

      <!-- Unteres Menü (immer am Fuß, linksbündig) -->
      <nav class="bottom">
        <a mat-list-item routerLink="/admin/profil" routerLinkActive="active">
          <mat-icon matListIcon>person</mat-icon>
          <span class="label">Profil bearbeiten</span>
        </a>

        <a mat-list-item (click)="logout()">
          <mat-icon matListIcon>logout</mat-icon>
          <span class="label">Ausloggen</span>
        </a>
      </nav>
    </div>
  </mat-sidenav>

  <!-- Rechte Inhaltsfläche -->
  <mat-sidenav-content class="content">
    <mat-toolbar color="primary" class="topbar">
      <!-- Seitentitel aus den Routen-Data -->
      <div class="page-title">{{ pageTitle$ | async }}</div>

      <span class="flex-spacer"></span>

      <!-- Benutzer-Avatar + Menü -->
      <button
        mat-icon-button
        [matMenuTriggerFor]="userMenu"
        class="avatar-btn"
        aria-label="Benutzer-Menü">
        <img *ngIf="(auth.user$ | async)?.photoURL as photo" [src]="photo" alt="Avatar" />
        <mat-icon *ngIf="!(auth.user$ | async)?.photoURL">account_circle</mat-icon>
      </button>

      <mat-menu #userMenu="matMenu">
        <button mat-menu-item routerLink="/admin/profil">
          <mat-icon>person</mat-icon>
          <span>Profil bearbeiten</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Ausloggen</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <!-- Router-Outlet rendert die Unterseiten -->
    <div class="route-slot">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
