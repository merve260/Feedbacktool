<!-- Kopfbereich / Titel -->
<h2 mat-dialog-title>{{ 'modal.surveyPreview.title' | translate }}: {{ data.title }}</h2>

<!-- Hauptinhalt -->
<div mat-dialog-content class="preview-content">

  <!-- Beschreibung der Umfrage -->
  <p class="description" *ngIf="data.description">{{ data.description }}</p>

  <!-- Eingabefeld Name (deaktiviert) -->
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>{{ 'modal.surveyPreview.name' | translate }}</mat-label>
    <input
      matInput
      [placeholder]="'modal.surveyPreview.namePlaceholder' | translate"
      disabled
    />
  </mat-form-field>

  <!-- Liste der Fragen -->
  <div *ngFor="let q of data.questions; let i = index" class="question-block">
    <h3>{{ i + 1 }}. {{ q.title }}</h3>

    <!-- Zusatztext zur Frage -->
    <p class="question-text" *ngIf="q.text">{{ q.text }}</p>

    <ng-container [ngSwitch]="q.type">

      <!-- Multiple Choice -->
      <div *ngSwitchCase="'multiple'">
        <mat-checkbox *ngFor="let opt of q.options" disabled>{{ opt }}</mat-checkbox>
      </div>

      <!-- Radiobuttons -->
      <div *ngSwitchCase="'radio'">
        <mat-radio-group>
          <mat-radio-button *ngFor="let opt of q.options" [value]="opt" disabled>
            {{ opt }}
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <!-- Skala / Slider -->
      <div *ngSwitchCase="'slider'" class="slider-preview">
        <mat-slider [min]="q.min || 1" [max]="q.max || 10" [step]="q.step || 1" disabled>
          <input matSliderThumb />
        </mat-slider>
        <small *ngIf="q.thumbLabel">{{ 'modal.surveyPreview.thumbLabel' | translate }}</small>
      </div>

      <!-- Sternebewertung -->
      <div *ngSwitchCase="'star'" class="star-rating">
        <mat-icon *ngFor="let s of [].constructor(q.maxStars || 5)">star</mat-icon>
      </div>

      <!-- Freitext -->
      <div *ngSwitchCase="'freitext'">
        <mat-form-field class="full-width">
          <mat-label>{{ q.placeholderText || ('modal.surveyPreview.answer' | translate) }}</mat-label>
          <input matInput disabled />
        </mat-form-field>
      </div>

      <!-- Unbekannter Typ -->
      <div *ngSwitchDefault>
        <p>{{ 'modal.surveyPreview.unknownType' | translate }}</p>
      </div>

    </ng-container>
  </div>
</div>

<!-- Dialog-Aktion -->
<div mat-dialog-actions align="end">
  <button
    mat-raised-button
    color="primary"
    (click)="close()"
    [attr.aria-label]="'modal.close' | translate"
  >
    {{ 'modal.close' | translate }}
  </button>
</div>
